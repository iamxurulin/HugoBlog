---
title: "æœ€å¤§é¢‘ç‡æ ˆ"
date: 2025-10-25 19:52:07
categories:
- ç®—æ³•
tags:
- leetcode
draft: false
---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/7700853f99574cc0ac99760bac5eeb41.png#pic_center)
### ä»£ç é€»è¾‘

è¿™é“é¢˜çš„å…³é”®åœ¨äºï¼šå¦‚ä½•åŒæ—¶ç»´æŠ¤é¢‘ç‡ä¿¡æ¯å’Œæ—¶é—´é¡ºåºï¼Ÿ

æˆ‘ä»¬å¯ä»¥æŠŠæ ˆæƒ³è±¡æˆä¸€ä¸ª"è›‹ç³•"ï¼ŒæŒ‰é¢‘ç‡åˆ†å±‚ï¼š

- **ç¬¬ 1 å±‚**ï¼šå­˜æ”¾æ‰€æœ‰å‡ºç°è¿‡ 1 æ¬¡çš„å…ƒç´ 
- **ç¬¬ 2 å±‚**ï¼šå­˜æ”¾æ‰€æœ‰å‡ºç°è¿‡ 2 æ¬¡çš„å…ƒç´ 
- **ç¬¬ 3 å±‚**ï¼šå­˜æ”¾æ‰€æœ‰å‡ºç°è¿‡ 3 æ¬¡çš„å…ƒç´ 
- ...

æ¯å½“ä¸€ä¸ªå…ƒç´ è¢« push è¿›æ¥ï¼Œå®ƒçš„é¢‘ç‡åŠ  1ç„¶åå®ƒä¼šè¢«æ·»åŠ åˆ°å¯¹åº”é¢‘ç‡çš„é‚£ä¸€å±‚ã€‚

æ¯å½“æ‰§è¡Œ pop æ“ä½œï¼Œä»æœ€é«˜å±‚ï¼ˆæœ€å¤§é¢‘ç‡å±‚ï¼‰å–å‡ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœè¯¥å±‚å˜ç©ºï¼Œå±‚æ•°å‡ 1ã€‚

#### 1.æ•°æ®ç»“æ„è®¾è®¡

```java
class FreqStack {
    // å½“å‰æœ€å¤§é¢‘ç‡
    private int topTimes;
    
    // åˆ†å±‚å­˜å‚¨ï¼šé¢‘ç‡ -> è¯¥é¢‘ç‡ä¸‹çš„å…ƒç´ åˆ—è¡¨
    private HashMap<Integer, ArrayList<Integer>> cntValues= new HashMap<>();
    
    // å…ƒç´ è®¡æ•°ï¼šå…ƒç´ å€¼ -> å‡ºç°æ¬¡æ•°
    private HashMap<Integer, Integer> valueTimes== new HashMap<>();
}
```
#### 2.push æ“ä½œ

```java
public void push(int val) {
    // æ›´æ–°è¯¥å…ƒç´ çš„é¢‘ç‡
    valueTimes.put(val, valueTimes.getOrDefault(val, 0) + 1);
    int curTopTimes = valueTimes.get(val);
    
    // å°†å…ƒç´ æ·»åŠ åˆ°å¯¹åº”é¢‘ç‡å±‚
    if (!cntValues.containsKey(curTopTimes)) {
        cntValues.put(curTopTimes, new ArrayList<>());
    }
    ArrayList<Integer> curTimeValues = cntValues.get(curTopTimes);
    curTimeValues.add(val);
    
    // æ›´æ–°æœ€å¤§é¢‘ç‡
    topTimes = Math.max(topTimes, curTopTimes);
}
```
#### 3.pop æ“ä½œ

```java
public int pop() {
    // ä»æœ€é«˜å±‚å–å‡ºæœ€åä¸€ä¸ªå…ƒç´ 
    ArrayList<Integer> topTimeValues = cntValues.get(topTimes);
    int ans = topTimeValues.remove(topTimeValues.size() - 1);
    
    // å¦‚æœè¯¥å±‚å˜ç©ºï¼Œåˆ é™¤è¯¥å±‚å¹¶é™ä½æœ€é«˜é¢‘ç‡
    if (topTimeValues.size() == 0) {
        cntValues.remove(topTimes--);
    }
    
    // æ›´æ–°å…ƒç´ çš„é¢‘ç‡è®¡æ•°
    int times = valueTimes.get(ans);
    if (times == 1) {
        valueTimes.remove(ans);
    } else {
        valueTimes.put(ans, times - 1);
    }
    
    return ans;
}
```

**å®Œæ•´ä»£ç **

```java
class FreqStack{
        // å½“å‰æœ€å¤§é¢‘ç‡
        private int topTimes;

        // åˆ†å±‚å­˜å‚¨ï¼šé¢‘ç‡ -> è¯¥é¢‘ç‡ä¸‹çš„å…ƒç´ åˆ—è¡¨
        private HashMap<Integer, ArrayList<Integer>> cntValues= new HashMap<>();

        // å…ƒç´ è®¡æ•°ï¼šå…ƒç´ å€¼ -> å‡ºç°æ¬¡æ•°
        private HashMap<Integer, Integer> valueTimes= new HashMap<>();

        public void push(int val) {
            // æ›´æ–°è¯¥å…ƒç´ çš„é¢‘ç‡
            valueTimes.put(val, valueTimes.getOrDefault(val, 0) + 1);
            int curTopTimes = valueTimes.get(val);

            // å°†å…ƒç´ æ·»åŠ åˆ°å¯¹åº”é¢‘ç‡å±‚
            if (!cntValues.containsKey(curTopTimes)) {
                cntValues.put(curTopTimes, new ArrayList<>());
            }
            ArrayList<Integer> curTimeValues = cntValues.get(curTopTimes);
            curTimeValues.add(val);

            // æ›´æ–°æœ€å¤§é¢‘ç‡
            topTimes = Math.max(topTimes, curTopTimes);
        }

        public int pop() {
            // ä»æœ€é«˜å±‚å–å‡ºæœ€åä¸€ä¸ªå…ƒç´ 
            ArrayList<Integer> topTimeValues = cntValues.get(topTimes);
            int ans = topTimeValues.remove(topTimeValues.size() - 1);

            // å¦‚æœè¯¥å±‚å˜ç©ºï¼Œåˆ é™¤è¯¥å±‚å¹¶é™ä½æœ€é«˜é¢‘ç‡
            if (topTimeValues.size() == 0) {
                cntValues.remove(topTimes--);
            }

            // æ›´æ–°å…ƒç´ çš„é¢‘ç‡è®¡æ•°
            int times = valueTimes.get(ans);
            if (times == 1) {
                valueTimes.remove(ans);
            } else {
                valueTimes.put(ans, times - 1);
            }

            return ans;
        }
    }
```



---

**å…³æ³¨æˆ‘ï¼Œå¸¦ä½ æ·±åº¦å‰–ææ›´å¤šç»å…¸ç®—æ³•é¢˜ï¼** ğŸš€
