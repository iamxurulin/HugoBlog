---
title: "说说消息队列的推模式和拉模式"
date: 2025-12-28 16:28:14
categories:
- 八股
tags:
- 消息队列
draft: false
---

**推模式**是消息队列主动将消息从Broker推送给Consumer，这种模式它的实时性比较好，消息可以立即送达消费者，但是缺点就是决定权不在消费者手上，在高并发场景下容易造成消费者过载。

**拉模式**是消费者主动从消息队列中的Broker拉取消息，这种模式就是根据消费者自身的负载和消费能力来决定拉去消息的频率，这样就可以避免过载，但是这种模式的实时性比不上推模式，而且还会导致消息延迟。

RocketMQ和Kafka都选择了**拉模式**，对于拉模式无法保证实时性的缺点，他们采取的是**长轮询**的方式来解决。

主要是通过在消费者去Broker拉取消息时，当有消息存在的话，那自然就直接返回消息；当没有消息时，则保持连接，暂时hold住请求，之后如果在对应的队列或者分区有新的消息到来时就通过之前hold住的请求及时地返回消息。


