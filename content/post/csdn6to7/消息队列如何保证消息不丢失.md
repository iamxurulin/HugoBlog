---
title: "消息队列如何保证消息不丢失？"
date: 2025-12-27 16:15:36
categories:
- 八股
tags:
- 消息队列
draft: false
---

为了保证消息不丢失，需要**生产消**息、**存储消息**和**消费消息**这三个阶段协同配合。

当生产者在发送消息时，需要通过消息确认机制来确保消息的成功到达。

我们知道存储在内存中的消息是断电不保存的，因此，为了避免消息因为服务器的宕机或者重启而丢失，需要在Broker收到消息后，将其持久化到磁盘中。

在消费者处理完消息后，需要向消息队列发送确认，如果没有收到消费者发送过来的确认，消息队列则需要重新投递该消息。
